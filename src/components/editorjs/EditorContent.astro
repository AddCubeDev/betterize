---
import Header from "@components/editorjs/subcomponents/Header.astro";
import Image from "@components/editorjs/subcomponents/Image.astro";
import Delimeter from "@components/editorjs/subcomponents/Delimeter.astro";
import Warning from "@components/editorjs/subcomponents/Warning.astro";
import List from "@components/editorjs/subcomponents/List.astro";
import Checklist from "@components/editorjs/subcomponents/Checklist.astro";
import Quote from "@components/editorjs/subcomponents/Quote.astro";
import Code from "@components/editorjs/subcomponents/Code.astro";
import Paragraph from "@components/editorjs/subcomponents/Paragraph.astro";
import Link from "@components/editorjs/subcomponents/Link.astro";
import UnsupportedContent from "@components/editorjs/subcomponents/UnsupportedContent.astro";
import { strapiUploadsBaseUrl } from "@typescript/consts";

const { blocks } = Astro.props;

---

{
    blocks.map((block: any) => {
        switch (block.type) {
            case "header":
                return (
                    <Header text={block.data.text} level={block.data.level} />
                );

            case "paragraph":
                return <Paragraph text={block.data.text} />;

            case "image":
                return (
                    <Image
                        src={strapiUploadsBaseUrl + block.data.file.url}
                        caption={block.data.caption}
                        height={block.data.file.height}
                        width={block.data.file.width}
                        stretched={block.data.stretched}
                    />
                );

            case "delimiter":
                return <Delimeter />;

            case "warning":
                return (
                    <Warning
                        title={block.data.title}
                        message={block.data.message}
                    />
                );

            case "list":
                return (
                    <List style={block.data.style} items={block.data.items} />
                );

            case "quote":
                return (
                    <Quote
                        text={block.data.text}
                        caption={block.data.caption}
                    />
                );

            case "checklist":
                return <Checklist items={block.data.items} />;

            case "code":
                return <Code code={block.data.code} />;

            case "LinkTool":
                return (
                    <Link
                        link={block.data.link}
                        title={block.data.meta.title}
                        description={block.data.meta.description}
                        image_url={block.data.meta.image.url}
                    />
                );

            case "mediaLib":
                if ( block.data.name == 'mediaLibraryStrapi' ) {
                    // do nothing
                    return '';
                } else {
                    return <UnsupportedContent data={block} />;
                }

            default:
                return <UnsupportedContent data={block} />;
        }
    })
}
