---
import type { Embed } from "./../../../../../typescript/types/components";

interface Props {
    data: Embed;
}

const { data } = Astro.props;

function isAutoplayable() {
    if (data.autoplay) {
        return "autoplay=1&mute=1&";
    } else {
        return "";
    }
}
---

<div class="relative w-full max-w-6xl mx-auto">
    <div class="shadow-2xl">
        <iframe
            class="offset-0 video"
            src={data.url + `?${isAutoplayable()}enablejsapi=1`}
            title="YouTube video player"
            allowfullscreen></iframe>
    </div>
    <p class="mt-2 text-gray-300 text-md">{data.caption}</p>
</div>

<style>
    .video {
        aspect-ratio: 16 / 9;
        width: 100%;
        height: 100%;
    }
</style>
