---
import Layout from "@layouts/Layout.astro";
import Nav from "@components/Nav.astro";
import Hero from "@components/Hero.astro";
import Footer from "@components/Footer.astro";
import FAQcard from "@components/subcomponents/FAQcard.astro";
import FAQsection from "@components/subcomponents/FAQsection.astro";
import FancyBg from "@components/subcomponents/FancyBg.astro";
---

<Layout>
    <FancyBg />
    <Nav />
    <main
        class="flex flex-col mx-auto min-h-screen gap-16 main-content items-center justify-center xl:p-0"
    >
        <h1 class="pt-20 header-1">Skontaktuj Się z nami</h1>
        <div class="mx-auto w-full lg:w-128">
            <form onsubmit="contactRequest(event)" class="space-y-4">
                <div>
                    <label class="sr-only" for="name">Twoje Imię</label>
                    <input
                        class="rounded-lg bg-neutral-800 border-gray-200 text-sm w-full p-3"
                        placeholder="Twoje Imię"
                        type="text"
                        id="name"
                    />
                </div>

                <div>
                    <label class="sr-only" for="email">Email</label>
                    <input
                        class="rounded-lg bg-neutral-800 border-gray-200 text-sm w-full p-3"
                        placeholder="Twój Adres Email"
                        type="email"
                        id="email"
                    />
                </div>

                <div>
                    <label class="sr-only" for="message">Message</label>

                    <textarea
                        class="rounded-lg bg-neutral-800 border-gray-200 text-sm w-full p-3"
                        placeholder="Wiadomość"
                        rows="8"
                        id="message"></textarea>
                </div>
                <div id="successInfo"></div>
                <div class="mt-4">
                    <button
                        id="contactButton"
                        type="submit"
                        class="rounded-lg flex font-medium bg-blue-600 text-center text-white py-3 px-16 transition-smooth inline-block hover:(bg-transparent border border-blue-600 shadow-xl shadow-blue-600/20)"
                    >
                        Wyślij
                    </button>
                </div>
            </form>
        </div>

        <FAQsection />
    </main>
    <Footer />

    <script type="text/javascript">
        async function contactRequest(event) {
            event.preventDefault();

            const successInfo = document.getElementById("successInfo");

            successInfo.innerHTML = `Gratki byq! W kontakcie.`;
            try {
                const response = await fetch(
                    "https://dhvphotography.pl:1443/api/contact-forms",
                    {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json",
                        },
                        body: JSON.stringify({
                            data: {
                                name: event.target.name.value,
                                email: event.target.email.value,
                                message: event.target.message.value,
                            },
                        }),
                    }
                );
            } catch (err) {
                console.log(err);
            }
        }
    </script>
</Layout>
